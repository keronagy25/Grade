<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>St-John Deacon School</title>
  <link rel="icon" type="image/png" href="madrast elshmamsa.png">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Cairo', sans-serif; background-color: #f4f1ea; min-height: 100vh; display: flex; flex-direction: column; }

    header { background-color: #4a0e0e; padding: 10px 60px; display: flex; justify-content: space-between; align-items: center; }
    .search-link { color: #fff; text-decoration: none; font-size: 18px; }
    .header-title { color: #fff; font-size: 24px; font-weight: 700; }
    .header-logos { display: flex; gap: 15px; align-items: center; }
    .header-logos img { width: 55px; height: 55px; object-fit: contain; }

    main { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 60px 20px; }
    .quote { color: #34495e; font-size: 32px; font-weight: 700; text-align: center; margin-bottom: 5px; max-width: 850px; line-height: 1.6; }
    .subtitle { color: #7a1b1b; font-size: 20px; font-weight: 600; text-align: center; margin-bottom: 30px; }

    .search-card { background: #ffffff; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08); max-width: 550px; width: 100%; text-align: center; }
    .search-title { color: #7a1b1b; font-size: 26px; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 12px; }
    .search-icon { font-size: 24px; }
    input { width: 100%; padding: 15px; font-size: 18px; font-family: 'Cairo', sans-serif; border: 1px solid #ddd; border-radius: 8px; outline: none; margin-bottom: 20px; text-align: right; background-color: #fff; color: #555; }
    input::placeholder { color: #aaa; }
    button { width: 100%; padding: 12px; font-size: 20px; font-family: 'Cairo', sans-serif; font-weight: 600; background-color: #7a1b1b; color: white; border: none; border-radius: 8px; cursor: pointer; transition: background 0.3s; }
    button:hover { background-color: #5a1414; }

    #result { margin-top: 30px; width: 100%; max-width: 550px; }
    .student-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; border-right: 5px solid #7a1b1b; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }

    footer { background-color: #4a0e0e; color: #fff; text-align: center; padding: 12px; font-size: 15px; }

    @media (max-width: 768px) { header { padding: 10px 20px; } .quote { font-size: 22px; } .header-title { font-size: 18px; } .search-card { padding: 25px; } }
  </style>
</head>
<body>

<header>
  <a href="#" class="search-link">Search</a>
  <h1 class="header-title">StJohnDeaconSchool</h1>
  <div class="header-logos">
    <img src="st john church logo - gold2.png" alt="Logo 1" />
    <img src="madrast elshmamsa.png" alt="Logo 2" />
  </div>
</header>

<main>
  <p class="quote">
    "Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„Ù’Ø­ÙØ¨ÙÙŠØ¨ÙØŒ ÙÙÙŠ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ø£ÙØ±ÙÙˆÙ…Ù Ø£ÙÙ†Ù’ ØªÙÙƒÙÙˆÙ†Ù Ù†ÙØ§Ø¬ÙØ­Ù‹Ø§ ÙˆÙØµÙØ­ÙÙŠØ­Ù‹Ø§ØŒ ÙƒÙÙ…ÙØ§ Ø£ÙÙ†ÙÙ‘ Ù†ÙÙÙ’Ø³ÙÙƒÙ Ù†ÙØ§Ø¬ÙØ­ÙØ©ÙŒ." (3 ÙŠÙˆ 1:2)
  </p>
  
  <p class="subtitle">Ù†ØªÙŠØ¬Ø© Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø´Ù…Ø§Ù…Ø³Ø© Ø§Ù„ØªØ±Ù… Ø§Ù„Ø§ÙˆÙ„ Ø¹Ø§Ù… 2025-2026Ù…</p>

  <div class="search-card">
    <h2 class="search-title">
      Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø©
      <span class="search-icon">ğŸ”</span>
    </h2>
    
    <input type="text" id="searchInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†" autocomplete="off" />
    <button onclick="search()">Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
  </div>

  <div id="result"></div>
</main>

<footer>
  Â© 2026 Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø´Ù…Ø§Ù…Ø³Ø© Ø¨ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ù‚Ø¯ÙŠØ³ Ù…Ø§Ø±ÙŠÙˆØ­Ù†Ø§ Ø§Ù„Ø­Ø¨ÙŠØ¨
</footer>

<script>
let students = [];

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
async function loadData() {
  try {
    const response = await fetch('students.json');
    students = await response.json();
  } catch (error) {
    console.error('Error loading data:', error);
  }
}

/* ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© */
function normalizeArabic(text) {
  if (!text) return '';
  return text
    .toLowerCase()
    .replace(/[Ø¥Ø£Ø¢]/g, 'Ø§')
    .replace(/Ù‰/g, 'ÙŠ')
    .replace(/Ø©/g, 'Ù‡')
    .replace(/[Ù‹ÙŒÙÙÙÙÙ‘Ù’]/g, '') // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ´ÙƒÙŠÙ„
    .replace(/\s+/g, ' ')
    .trim();
}

/* Ø§Ù„Ø¨Ø­Ø« */
function search() {
  const inputField = document.getElementById('searchInput');
  const resultBox = document.getElementById('result');

  const rawInput = inputField.value.trim();
  if (!rawInput) return;

  const isPhone = /^\d+$/.test(rawInput);
  const normalizedInput = normalizeArabic(rawInput);

  // ğŸ”´ Ù„Ùˆ Ø§Ø³Ù… (Ù…Ø´ Ø±Ù‚Ù…) Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† Ø«Ù†Ø§Ø¦ÙŠ
  if (!isPhone) {
    const words = normalizedInput.split(' ');
    if (words.length < 2) {
      resultBox.innerHTML = `
        <p style="text-align:center; color:#7a1b1b; font-weight:600;">
          Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø«Ù†Ø§Ø¦ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 
        </p>
      `;
      return;
    }
  }

  const matched = students.filter(student => {
    const normalizedName = normalizeArabic(student.full_name || '');
    const phone = student.phone || '';

    return normalizedName.includes(normalizedInput) || phone.includes(rawInput);
  });

  if (matched.length === 0) {
    resultBox.innerHTML = `
      <p style="text-align:center; color:#7a1b1b;">
        Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø©.
      </p>
    `;
    return;
  }

  let html = '';

  matched.forEach(student => {
    const full_name = student.full_name || '-';
    const phone = student.phone || '-';
    const age = student.age || '-';
    const gender = student.gender || '-';
    const academic_year = student.academic_year || '-';
    const deacon_rank = student.deacon_rank || '-';
    const attendance_count = student.attendance_count || '-';
    const evaluation = student.evaluation || '-';
    const attendance_grade = student.attendance_grade || '-';
    const hymns_grade = student.hymns_grade || '-';
    const coptic_grade = student.coptic_grade || '-';
    const theology_grade = student.theology_grade || '-';
    const total = student.total || '-';

    if (academic_year === 'Ø­Ø¶Ø§Ù†Ø©') {
      html += `
        <div class="student-card">
          <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${full_name}</p>
          <p><strong>Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†:</strong> ${phone}</p>
          <p><strong>Ø§Ù„Ø³Ù†:</strong> ${age}</p>
          <p><strong>Ø§Ù„Ø¬Ù†Ø³:</strong> ${gender}</p>
          <p><strong>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:</strong> ${academic_year}</p>
          <p><strong>Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø´Ù…Ø§Ø³ÙŠØ©:</strong> ${deacon_rank}</p>
          <p><strong>Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± 8 :</strong> ${attendance_count}</p>
          <p><strong>Ø§Ù„ØªÙ‚Ø¯ÙŠØ± :</strong> ${evaluation}</p>
        </div>
      `;
    } else {
      html += `
        <div class="student-card">
          <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${full_name}</p>
          <p><strong>Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†:</strong> ${phone}</p>
          <p><strong>Ø§Ù„Ø³Ù†:</strong> ${age}</p>
          <p><strong>Ø§Ù„Ø¬Ù†Ø³:</strong> ${gender}</p>
          <p><strong>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:</strong> ${academic_year}</p>
          <p><strong>Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø´Ù…Ø§Ø³ÙŠØ©:</strong> ${deacon_rank}</p>
          <p><strong>Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ± 8 :</strong> ${attendance_count}</p>
          <p><strong>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø¶ÙˆØ±:</strong> ${attendance_grade}</p>
          <p><strong>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù„Ø­Ø§Ù† 40 :</strong> ${hymns_grade}</p>
          <p><strong>Ø¯Ø±Ø¬Ø© Ø§Ù„Ù‚Ø¨Ø·ÙŠ 20 :</strong> ${coptic_grade}</p>
          <p><strong>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø·Ù‚Ø³ 20 :</strong> ${theology_grade}</p>
          <p><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</strong> ${total}</p>
        </div>
      `;
    }
  });

  html += `
    <p style="text-align:center; margin-top:12px; font-weight:600;">
      Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø­ØªÙØ¸ Ø¨Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒÙ„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© (screenshot)
    </p>
  `;

  resultBox.innerHTML = html;
}

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø§ØªØ§ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© */
window.onload = loadData;
</script>
</body>

</html>
